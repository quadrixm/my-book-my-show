(this["webpackJsonpmy-book-my-show"]=this["webpackJsonpmy-book-my-show"]||[]).push([[0],{111:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(28),l=n.n(r),c=(n(80),n(81),"authUserId"),s="authUserName",i="/",d="/login",j="/signup",b="/shows/:movieId",u="/booking-detail/:bookingId",h="/bookings",v=n(20),O=n(9),x=n(6),g=n(13),m=n.n(g),p=n(117),f=n(118),w=n(70),S=n(120),I=n(71),k=n(1),y=function(){var e,t=localStorage.getItem(c)&&(null===(e=localStorage.getItem(c))||void 0===e?void 0:e.length),n=o.a.useState(),a=Object(x.a)(n,2),r=a[0],l=a[1],d=o.a.useState(),b=Object(x.a)(d,2),u=b[0],h=b[1];return t?Object(k.jsx)(O.a,{to:i}):Object(k.jsx)(p.a,{children:Object(k.jsx)(f.a,{children:Object(k.jsxs)(w.a,{lg:{span:4,offset:4},children:[Object(k.jsx)("h1",{children:"Welcome to My Book My Show"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsxs)(S.a,{children:[Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(k.jsx)(S.a.Label,{children:"Email address"}),Object(k.jsx)(S.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return l(e.target.value)}})]}),Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(k.jsx)(S.a.Label,{children:"Password"}),Object(k.jsx)(S.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return h(e.target.value)}})]}),Object(k.jsx)(I.a,{variant:"primary",onClick:function(){r&&r.length?u&&u.length?m.a.post("login",{email:r,password:u}).then((function(e){var t=e.data;console.log({data:t}),localStorage.setItem(c,t.id),localStorage.setItem(s,t.name),window.location.reload()}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")})):alert("Please enter password"):alert("Please enter email id")},children:"Login"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(v.b,{to:{pathname:j},children:"Register now!"})]})]})})})},C=function(){var e,t=localStorage.getItem(c)&&(null===(e=localStorage.getItem(c))||void 0===e?void 0:e.length),n=o.a.useState(),a=Object(x.a)(n,2),r=a[0],l=a[1],s=o.a.useState(),j=Object(x.a)(s,2),b=j[0],u=j[1],h=o.a.useState(),g=Object(x.a)(h,2),y=g[0],C=g[1],T=o.a.useState(),B=Object(x.a)(T,2),P=B[0],E=B[1];return t?Object(k.jsx)(O.a,{to:i}):Object(k.jsx)(p.a,{children:Object(k.jsx)(f.a,{children:Object(k.jsxs)(w.a,{lg:{span:4,offset:4},children:[Object(k.jsx)("h1",{children:"Create a new for My Book My Show"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsxs)(S.a,{children:[Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(k.jsx)(S.a.Label,{children:"Name"}),Object(k.jsx)(S.a.Control,{type:"text",placeholder:"Enter name",onChange:function(e){return l(e.target.value)}})]}),Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(k.jsx)(S.a.Label,{children:"Email address"}),Object(k.jsx)(S.a.Control,{type:"email",placeholder:"Enter email",onChange:function(e){return u(e.target.value)}})]}),Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(k.jsx)(S.a.Label,{children:"New Password"}),Object(k.jsx)(S.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return C(e.target.value)}})]}),Object(k.jsxs)(S.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(k.jsx)(S.a.Label,{children:"Enter Password again"}),Object(k.jsx)(S.a.Control,{type:"password",placeholder:"Password",onChange:function(e){return E(e.target.value)}})]}),Object(k.jsx)(I.a,{variant:"primary",onClick:function(){r&&r.length?b&&b.length?y&&y.length?P&&P.length&&P===y?m.a.post("signup",{name:r,email:b,password:y}).then((function(e){var t=e.data;console.log({data:t}),alert("Account created successfully. Please login now.")}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")})):alert("Password not confirmed"):alert("Please enter password"):alert("Please enter email id"):alert("Please enter name")},children:"Signup"}),Object(k.jsx)("br",{}),Object(k.jsx)("br",{}),Object(k.jsx)(v.b,{to:{pathname:d},children:"Login now!"})]})]})})})},T=n(121),B=n(122),P=n(119),E=function(e){var t=e.children;return Object(k.jsxs)(p.a,{children:[Object(k.jsx)(T.a,{bg:"light",expand:"lg",children:Object(k.jsxs)(p.a,{children:[Object(k.jsx)(T.a.Brand,{href:"/",children:"My Book My Show"}),Object(k.jsx)(T.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(k.jsx)(T.a.Collapse,{id:"basic-navbar-nav",children:Object(k.jsxs)(B.a,{className:"me-auto",children:[Object(k.jsx)(B.a.Link,{href:"/",children:"Home"}),Object(k.jsx)(B.a.Link,{href:"#".concat(h),children:"My Bookings"}),Object(k.jsx)(P.a,{title:"Account",id:"basic-nav-dropdown",children:Object(k.jsx)(P.a.Item,{onClick:function(){window.confirm("Are you sure you want to logout?")&&(localStorage.removeItem(c),localStorage.removeItem(s),window.location.reload())},children:"Logout"})})]})})]})}),Object(k.jsx)(f.a,{children:Object(k.jsx)(w.a,{children:t})})]})},L=n(123),M=function(){var e,t=localStorage.getItem(c)&&(null===(e=localStorage.getItem(c))||void 0===e?void 0:e.length),n=o.a.useState([]),a=Object(x.a)(n,2),r=a[0],l=a[1];return o.a.useEffect((function(){m.a.get("movies").then((function(e){var t=e.data;console.log({data:t}),l(t)}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")}))}),[]),t?Object(k.jsxs)(E,{children:[Object(k.jsx)("br",{}),r.map((function(e){return Object(k.jsx)(L.a,{children:Object(k.jsx)(L.a.Body,{children:Object(k.jsx)(L.a.Text,{children:Object(k.jsx)(v.b,{to:{pathname:b.replace(":movieId",String(e.id))},children:e.name})})})})}))]}):Object(k.jsx)(O.a,{to:d})},N=function(){var e=localStorage.getItem(c),t=e&&e.length,n=Object(O.g)(),a=Object(O.h)().movieId,r=o.a.useState([]),l=Object(x.a)(r,2),s=l[0],i=l[1];o.a.useEffect((function(){m.a.get("/shows/".concat(a)).then((function(e){var t=e.data;console.log({data:t}),i(t)}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")}))}),[a]);return t?Object(k.jsxs)(E,{children:[Object(k.jsx)("br",{}),s.map((function(t){return Object(k.jsx)(L.a,{children:Object(k.jsxs)(L.a.Body,{children:[Object(k.jsx)(L.a.Title,{children:t.movie.name}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Theatre: "})," ",t.theatre.name]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Timings: "})," ",t.timing]}),Object(k.jsx)(I.a,{variant:"primary",onClick:function(){return function(t){if(e&&t){var a=prompt("Please enter number of seats to book");if(a){var o={showId:t,userId:parseInt(e),noOfSeats:parseInt(a)};m.a.post("book-show",o).then((function(e){var t=e.data;console.log({data:t});var a=t;n.push({pathname:u.replace(":bookingId",String(a.id))})}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")}))}else alert("Please select number of seat count!")}}(t.id)},children:"Book"})]})})}))]}):Object(k.jsx)(O.a,{to:d})},G=n(124),A=function(){var e,t,n,a,r,l,s,j,b,u,h=localStorage.getItem(c)&&(null===(e=localStorage.getItem(c))||void 0===e?void 0:e.length),v=Object(O.g)(),g=Object(O.h)().bookingId,p=o.a.useState(),f=Object(x.a)(p,2),w=f[0],S=f[1];o.a.useEffect((function(){m.a.get("/booking-detail/".concat(g)).then((function(e){var t=e.data;console.log({data:t}),S(t)}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")}))}),[g]);return h?Object(k.jsxs)(E,{children:[Object(k.jsx)("br",{}),Object(k.jsx)(L.a,{children:Object(k.jsxs)(L.a.Body,{children:[Object(k.jsx)(G.a,{variant:"success",children:"Booking successful!"}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Booking Code: "})," ",null!==(t=null===w||void 0===w?void 0:w.bookingCode)&&void 0!==t?t:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Movie: "})," ",null!==(n=null===w||void 0===w||null===(a=w.show)||void 0===a||null===(r=a.movie)||void 0===r?void 0:r.name)&&void 0!==n?n:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Theatre: "})," ",null!==(l=null===w||void 0===w||null===(s=w.show)||void 0===s||null===(j=s.theatre)||void 0===j?void 0:j.name)&&void 0!==l?l:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Timings: "})," ",null!==(b=null===w||void 0===w||null===(u=w.show)||void 0===u?void 0:u.timing)&&void 0!==b?b:""]}),Object(k.jsx)("br",{}),Object(k.jsx)(I.a,{onClick:function(){v.push({pathname:i})},children:"Exit"})]})})]}):Object(k.jsx)(O.a,{to:d})},F=function(){var e=localStorage.getItem(c),t=e&&e.length,n=o.a.useState([]),a=Object(x.a)(n,2),r=a[0],l=a[1];return o.a.useEffect((function(){m.a.get("/bookings/".concat(e)).then((function(e){var t=e.data;console.log({bookings:t}),l(t)}),(function(e){var t,n;return alert((null===e||void 0===e||null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Server error.")}))}),[e]),t?Object(k.jsxs)(E,{children:[Object(k.jsx)("br",{}),(null===r||void 0===r?void 0:r.length)?r.map((function(e){var t,n,a,o,r,l,c,s,i;return Object(k.jsx)(L.a,{children:Object(k.jsxs)(L.a.Body,{children:[Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Booking Code: "})," ",null!==(t=null===e||void 0===e?void 0:e.bookingCode)&&void 0!==t?t:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Movie: "})," ",null!==(n=null===e||void 0===e||null===(a=e.show)||void 0===a||null===(o=a.movie)||void 0===o?void 0:o.name)&&void 0!==n?n:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Theatre: "})," ",null!==(r=null===e||void 0===e||null===(l=e.show)||void 0===l||null===(c=l.theatre)||void 0===c?void 0:c.name)&&void 0!==r?r:""]}),Object(k.jsxs)(L.a.Text,{children:[Object(k.jsx)("b",{children:"Timings: "})," ",null!==(s=null===e||void 0===e||null===(i=e.show)||void 0===i?void 0:i.timing)&&void 0!==s?s:""]})]})})})):[]]}):Object(k.jsx)(O.a,{to:d})};m.a.defaults.baseURL="http://159.65.155.171/api",m.a.defaults.headers.post["Content-Type"]="application/json;charset=utf-8",m.a.defaults.headers.post["Access-Control-Allow-Origin"]="*";var U=function(){return Object(k.jsx)(v.a,{children:Object(k.jsxs)(O.d,{children:[Object(k.jsx)(O.b,{exact:!0,path:i,component:M}),Object(k.jsx)(O.b,{path:d,component:y}),Object(k.jsx)(O.b,{path:j,component:C}),Object(k.jsx)(O.b,{path:"/movies",component:M}),Object(k.jsx)(O.b,{path:b,component:N}),Object(k.jsx)(O.b,{path:u,component:A}),Object(k.jsx)(O.b,{path:h,component:F})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,125)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),a(e),o(e),r(e),l(e)}))};l.a.render(Object(k.jsx)(o.a.StrictMode,{children:Object(k.jsx)(U,{})}),document.getElementById("root")),J()},80:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.b3058719.chunk.js.map